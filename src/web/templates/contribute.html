{% extends "layout.html" %}
{% block assets_start %}
    {{ super() }}
	
	{% assets filters="jsmin", output="assets/packaged-contribute.js",
          "lib/bower/leaflet-geosearch/src/js/l.control.geosearch.js", 
		  "lib/bower/leaflet-geosearch/src/js/l.geosearch.provider.google.js",
		  "lib/bower/leaflet-geocoder-mapzen/src/leaflet-geocoder-mapzen.js",
		  "lib/bower/Leaflet.label/dist/leaflet.label.js",
		  "lib/bower/dropzone/dist/dropzone.js", 
		  "lib/bower/select2/dist/js/select2.full.min.js",
		  "lib/bower/jquery-form-validator/form-validator/jquery.form-validator.min.js"
	%}
		<script type="text/javascript" src="{{ ASSET_URL }}"></script>
	{% endassets %}
	
	{% assets filters="cssmin", output="assets/packaged-contribute.css",
          "lib/bower/leaflet-geocoder-mapzen/src/leaflet-geocoder-mapzen.css", 
		  "lib/bower/Leaflet.label/dist/leaflet.label.css", 
		  "lib/bower/dropzone/dist/dropzone.css",
		  "lib/bower/select2/dist/css/select2.min.css",
		  "lib/bower/jquery-form-validator/form-validator/theme-default.min.css"
	%}
		<link rel="stylesheet" type="text/css" href='{{ ASSET_URL }}' media="screen">
	{% endassets %}

{% endblock %}

{% block wrapper_start %}
<div id="wrapper">
{% endblock %}

{% block content %}
        <section class="contribute">
            <div class="content">
                <h1>Add your project</h1>
                <p>The Shelter Database exists because of people like you!<br />We need you to help us build the content</p>
				{% if g.user.is_authenticated %}
                <a id="newShelter" onclick="modalOpen('create')" class="bt button button-red"><i class="fa fa-plus"></i><span class="text">Add Project</span></a>
				{% else %}
				    <a href="{{ url_for('join') }}" class="bt button button-red"><i class="fa fa-user"></i><span class="text">Please login to add your project</span></a>
				{% endif %}
            </div>
        </section>
        <section class="" style="background-color:#ecf0f1;">
            <div class="content">
                <h3>Why add a project</h3>
                <div class="flexbox">
                    <div class="box">
                        <i class="head fa fa-bank"></i>
                        <h4>Share knowledge</h4>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    </div>
                    <div class="box">
                        <i class="head fa fa-heartbeat"></i>
                        <h4>Save lives</h4>
                        <p>Adding your project will save lives. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    </div>
                </div>
            </div>
        </section>

    
{% endblock %}

{% block footer %}
{{ super() }}

<div class="mymodal" id="create">
        <div class="content page1" id="modalcontent">
            <div class="page page1">
			    <form class="myform" id="createShelterForm" action="#" method="GET" name="save">
					<div class="mygroup">
						<div class="mylabel">Title of your project:</div>
						<div class="myinput"><input name="titleofproject" data-validation="length" data-validation-length="min4" data-validation-error-msg="Please give a title of minimum 4 characters" id="titleofproject" type="text" placeholder="Name" /></div>
					</div>

					<div class="mygroup">
						<div class="mylabel">Country:</div>
						<label for="countrySelect" class="button button-drop">
							<select id="countrySelect" data-validation="required" name="country" data-live-search="true" ></select>
						</label>
					</div>
                
					<!-- <a href="" class="button button-light button-drop button-stretch">Select</a> -->
					<div class="buttons">
						<div onclick="modalClose()" class="button button-light"><i class="fa fa-times"></i><span class="text">Cancel</span></div>
						<!--<button type="submit" id="createShelter" class="btn btn-default form-control" value="Create">Create</button>	-->			                   
					   <div id="createShelter" class="button button-light button-right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
					</div>
				</form>
            </div>
			<div class="page page2">
				<form class="myform" id="organizationsForm">
					<div class="mygroup">
						<div class="mylabel">Who is the implementing organization?</div>
						<select class="organizations" id="organizations" data-validation="required" property-id="" attribute-id="16" category-id="4" value-id="None" value="">
						</select>
					</div>
					<div class="buttons">
						<div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Cancel</span></div>
						<div onclick="modalNext('#organizationsForm')" class="button button-light button-right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
					</div>
				</form>
            </div>
            <div class="page page3">
				<form class="myform" id="yearLocationForm">
					<div class="mygroup">
						<div class="mylabel">What is the year of construction of the first shelters?</div>
						<div class="myinput"><input type="number" name="yearofconstructionfirstshelters" data-validation="number" data-validation-allowing="range[1970;2030]" id="yearofconstructionfirstshelters" class="free-text-attribute" property-id="" attribute-id="36" category-id="8" value-id="None" value="" placeholder="2016"></div>
					</div>
					<div class="mylabel">Where is the shelter located?</div>
					<div id="locationpicker" style="width:100%; height:250px;">
						<input type="hidden" id="latitude" name="lattitude" class="free-text-attribute" property-id="" attribute-id="8" category-id="2" value-id="None" value="">
						<input type="hidden" id="longitude" name="longitude" class="free-text-attribute" property-id="" attribute-id="9" category-id="2" value-id="None" value="">
					</div>
			
					<div class="buttons">
						<div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Cancel</span></div>
						<div onclick="modalPrev()" class="button button-light button-left"><i class="fa fa-arrow-left"></i><span class="text">Previous</span></div>
						<div onclick="modalNext('#yearLocationForm')" class="button button-light button-right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
					</div>
				</form>
            </div>
			<div class="page page4">
				<form class="myform" id="disasters">
					<div class="mygroup">			
						<div class="mylabel">What type of disaster is the shelter associated with?</div>
						<label for="associatedDisasterSelect" class="button button-drop">
							<select id="associatedDisasterSelect" name="associateddisaster" data-validation="required" class="select-attribute" property-id="" attribute-id="13" category-id="4" data-live-search="true">
								  <option value=""></option>
							</select>
						</label>
					</div>
					
					<div class="mygroup">
						<div class="mylabel">What type of humanitarian response is it?</div>
						<label for="shelterTypeSelect" class="button button-drop">
							<select id="shelterTypeSelect" data-validation="required" class="select-attribute" property-id="" attribute-id="21" category-id="4">
								  <option value=""></option>
							</select>
						</label>
					</div>

					<div class="buttons">
						<div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Cancel</span></div>
						<div onclick="modalPrev()" class="button button-light button-left"><i class="fa fa-arrow-left"></i><span class="text">Previous</span></div>
						<div onclick="modalNext('#disasters')" class="button button-light button-right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
					</div>
				</form>
            </div>
			<!--
            <div class="page page3">
                <div class="mylabel">Location of the Site:</div>
                <div class="options">
                    <div class="option" onclick="optClick(0)" style="background-image: url('{{ url_for('static', filename='img/site/1.png') }}')"></div>
                    <div class="option" onclick="optClick(1)" style="background-image: url('{{ url_for('static', filename='img/site/2.png') }}')"></div>
                    <div class="option" onclick="optClick(2)" style="background-image: url('{{ url_for('static', filename='img/site/3.png') }}')"></div>
                    <div class="option" onclick="optClick(3)" style="background-image: url('{{ url_for('static', filename='img/site/4.png') }}')"></div>
                    <div class="option" onclick="optClick(4)" style="background-image: url('{{ url_for('static', filename='img/site/5.png') }}')"></div>
                    <div class="option" onclick="optClick(5)" style="background-image: url('{{ url_for('static', filename='img/site/6.png') }}')"></div>
                    <div class="option" onclick="optClick(6)" style="background-image: url('{{ url_for('static', filename='img/site/7.png') }}')"></div>
                    <div class="option" onclick="optClick(7)" style="background-image: url('{{ url_for('static', filename='img/site/8.png') }}')"></div>
                </div>

                <div class="buttons">
                    <div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Cancel</span></div>
                    <div onclick="modalNext()" class="button button-light right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
                </div>
            </div>
			-->            
			<div class="page page5">
				<form class="myform" id="photos">
					<div class="mygroup">
						<div class="mylabel">Upload photos of the shelter</div>
						<div id="uploader">
						   <div class="dz-default dz-message"><span>Drop files here to upload</span></div>
						   <div class="fallback">
							   <input id="files" multiple="true" name="files" type="file"
									  data-validation="length mime size"
									  data-validation-length="min1"
									  data-validation-allowing="jpg, png, gif"
									  data-validation-max-size="4000kb"
									  data-validation-error-msg-size="You can not upload images larger than 4000kb"
									  data-validation-error-msg-mime="You can only upload images"
									  data-validation-error-msg-length="You have to upload at least one images">
							</div>
						</div>
					</div>
				
					<div class="buttons">
						<div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Cancel</span></div>
						<div onclick="modalPrev()" class="button button-light button-left"><i class="fa fa-arrow-left"></i><span class="text">Previous</span></div>
						<div onclick="modalNext('#photos')" class="button button-light button-right"><i class="fa fa-arrow-right"></i><span class="text">Next</span></div>
					</div>
                </form>
            </div>
			<div class="page page6">
				<form class="myform" id="specs">
					<div class="mygroup">
						<div class="mylabel">What is the unit cost of the shelter (USD)?</div>
						<div class="myinput"><input type="number" data-validation="required"  class="free-text-attribute" id="unitCost" property-id="" attribute-id="49" category-id="8" value-id="None" value=""></div>
					</div>
					
					<div class="mygroup">
						<div class="mylabel">What is the number of inhabitants of the shelter?</div>
						<div class="myinput"><input type="number" data-validation="required" min="1" max="200" class="free-text-attribute" id="inhabitants" property-id="" attribute-id="37" category-id="8" value-id="None" value=""></div>
					</div>
					
					<div class="mygroup">
						<div class="mylabel">What is the total surface area in square meters (m2)?</div>					
						<div class="myinput"><input type="number" data-validation="required" class="free-text-attribute" id="surface" property-id="" attribute-id="45" category-id="8" value-id="None" value=""></div>
					</div>
					
					<div class="mygroup">
                            <div class="mylabel">Terms</div>
                            <div class="mycheckbox"><input type="checkbox" id="field8507618" data-validation="required"><label class="checkbox" for="field8507618"><i class="fa fa-check"></i> Accept the <a href="/termsofservice" target="_blank">terms of service</a></label></div>
                    </div>
					<div class="buttons">
						<div onclick="modalPrev()" class="button button-light button-left"><i class="fa fa-arrow-left"></i><span class="text">Previous</span></div>
						<div onclick="modalNext('#specs')" class="button button-light"><i class="fa fa-check"></i><span class="text">Finish</span></div>
					</div>
				</form>
            </div>
			
			<div class="page page7">
				<p>Thank you for entering your shelter in the shelter database. Your shelter will be visible in the database after a short review by the administrator.
				We kindly request you to add additional data about your shelter, such as technical documentation and drawings, and different attributes. You can edit your 
				shelter when you log in to the website and go to 'your shelters'.</p>
				<div class="buttons">
                    <div onclick="modalClose()" class="button button-light"><i class="fa fa-check"></i><span class="text">Close</span></div>
                </div>
            </div>
			
			
			
        </div>
    </div>
	
	<script>
		var cleanFilename = function (name) {
		   return name.toLowerCase().replace(/[^\w]/gi, '');
		};
		
		var dropzone;
		
		var createDropzone = function(){

			dropzone = $("div#uploader").dropzone({ url: "/shelter/edit/multi/" + shelter_id + '/' + category_id + '/General information'});
			Dropzone.options.uploader = {
			  paramName: "file", // The name that will be used to transfer the file
			  uploadMultiple: true,
			  parallelUploads: 1,
			  maxFilesize: 4, // MB
			  acceptedFiles: "image/*",
			};
			
			// add class
			$('div#uploader').addClass('dropzone');
		}
	</script>
	<script>
	    var shelter_id;
		
        $(document).ready(function() {

			initiateLocationPicker();
			
            $("#newShelter").click(function(evt) {
			    
                // fetch shelters
				fetchCountries();
				
				//fetch disaster types
				fetchAssociatedDisasters();
				
				//fetch shelter types
				fetchShelterTypes();
            });
			
			// initiate form validator
			$.validate();
			
			$(".organizations").select2({
				  tags: true,
				  createTag: function (params) {
					return {
					  id: params.term,
					  text: params.term,
					  newOption: true
					}
				  },
				  templateResult: function (data) {
					var $result = $("<span></span>");

					$result.text(data.text);

					if (data.newOption) {
					  $result.append(" <em>(new)</em>");
					}

					return $result;
				  },
				  ajax: {
					url: "https://www.humanitarianresponse.info/api/v1.0/organizations?autocomplete[operator]=CONTAINS&fields=label,id",
					dataType: 'json',
					delay: 250,
					data: function (params) {
					  return 'autocomplete[string]=' + params.term; // search term
					},
					processResults: function (data, page) {
					  // parse the results into the format expected by Select2.
					  // since we are using custom formatting functions we do not need to
					  // alter the remote JSON data
					  
					  var keys = Object.keys(data.data);
					  var items = [];
					  for (var j=0; j < keys.length; j++) {
						items.push({
							id: j,
							text: data.data[keys[j]]
						});
					  }
					  
					  return {
						
						results: items
					  };
					},
					cache: true
				  },
				  escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
				  minimumInputLength: 1
					
			}); 
			
            //Attach a submit handler to the form (only allow to click once)
			$('#createShelter').on( "click", function() {
				if(! $('#createShelterForm').isValid({},{}, true) ) {
					return;
				}
				
				// check if form was already submitted
				var submitted = $('#createShelterForm').attr('submitted');
				if (typeof submitted !== typeof undefined && submitted !== false) {
					return;
				}
				
				// set form to submitted
				$('#createShelterForm').attr('submitted', 'yes');
				
				// start spinner
				$('#wrapper').spin();		
		
				// Send the data using post
				name_of_shelter = $('#titleofproject').val();
				country_value_id = $('#countrySelect option:selected').val();
				country_name = $('#countrySelect option:selected').text()
				create_shelter(name_of_shelter, country_value_id, country_name, function (success, result){
					if(!success){
						console.log(result);
					} else {
						shelter_id = result;
						
						// create dropzone
						createDropzone();		
						
						// update the map given the country
						updateLocationPicker();
						
						// add spinner
						$('#wrapper').spin(false);
		
						// go to next page
						modalNext();
						
						// Make sure we can submit the form again for a new shelter
						$('#createShelterForm').removeAttr('submitted');
						
						
					}
				});
			});
		
		var fetchCountries = function (){
				var filters = [{"name":"name","op":"eq","val":"Country"}];
                $.ajax({
                    type: 'GET',
                    url: '/api/attribute',
                    contentType: "application/json",
                    dataType: "json",
                    data: {"q": JSON.stringify({"filters": filters})},
                    success: function(result) {
                        result.objects[0].associated_values.map(function(country) {
                            $("#countrySelect").append(new Option(country.name, country.id));
                        });
						$("#countrySelect").val([]);
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown){
                        //alert(errorThrown);
                    }
                }) ;
			};
		
		var fetchAssociatedDisasters = function (){
				var filters = [{"name":"name","op":"eq","val":"Associated disaster / Immediate cause"}];
                $.ajax({
                    type: 'GET',
                    url: '/api/attribute',
                    contentType: "application/json",
                    dataType: "json",
                    data: {"q": JSON.stringify({"filters": filters})},
                    success: function(result) {
                        result.objects[0].associated_values.map(function(disaster) {
                            $("#associatedDisasterSelect").append(new Option(disaster.name, disaster.id));
                        })
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown){
                        //alert(errorThrown);
                    }
                }) ;
		};
		
		var fetchShelterTypes = function (){
				var filters = [{"name":"name","op":"eq","val":"Type of shelter"}];
                $.ajax({
                    type: 'GET',
                    url: '/api/attribute',
                    contentType: "application/json",
                    dataType: "json",
                    data: {"q": JSON.stringify({"filters": filters})},
                    success: function(result) {
                        result.objects[0].associated_values.map(function(shelter) {
                            $("#shelterTypeSelect").append(new Option(shelter.name, shelter.id));
                        })
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown){
                        //alert(errorThrown);
                    }
                }) ;
		};
	});
    </script>
	
	<script type="text/javascript">
	
	function findCountry(data, country){
		var countryData = {};
		$.each(data.features, function (key, val) {
			if (val.properties.other_name === country) {
				countryData.lat = val.properties.lat;
				countryData.lon = val.properties.lon;
				countryData.polygon = val;
				
				//if found, break out of loop
				return false;
			}
		});
		
		//return object (or empty object)
		return countryData;
	};
	
	var countries = {};
	var layerGroup, marker, locationpicker, bounds;
	
	function initiateLocationPicker (){
 
		//set encoding
		$.ajaxSetup({
			scriptCharset: "utf-8",
			contentType: "application/json; charset=utf-8"
		});

		//get data from api
		$.getJSON("/static/data/countries_merge.geojson", function(data) {
			// set countries
			countries = data;
						
			// Initiate leaflet map
			locationpicker = L.map('locationpicker').setView([51.505, -0.09], 13);;
			
			// Add OSM base layer
			L.tileLayer('http://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png').addTo(locationpicker);
			
			// Add Mapzen geocoder 
			L.control.geocoder('search-Us5vhhe', {panToPoint: true, markers: false, attribution: null}).addTo(locationpicker);
			
			// Create group for your layers and add it to the map
			layerGroup = L.layerGroup().addTo(locationpicker);
			
			// add marker
			marker = L.marker([0,0], {draggable:'true'}).bindLabel('This is where I have built this shelter');
			marker.addTo(locationpicker);
			
			// add listeners	
			locationpicker.on('click', function(e) {        
				var location = e.latlng;
				marker.setLatLng(location).update();
				setLocation(e.latlng);
			});	
		});
	};
	
	var updateLocationPicker = function(){
		//Query nomatimim for lat lon for country
		var country = $('#countrySelect option:selected').text();
		
		var countryData = findCountry(countries, country);
			
		if(jQuery.isEmptyObject(countryData)){
		  //country was not found
		  //TODO: handle error
		  return;
		} 
		
		// remove all layers
		layerGroup.clearLayers();
		
		// Add country polygon to map and fit map to bounds
		var countryLayer = L.geoJson(countryData.polygon).addTo(layerGroup);
		
		// listen to clicks on the layer to set the marker
		countryLayer.on('click', function(e) {        
			var location = e.latlng;
			marker.setLatLng(location).update();
			setLocation(e.latlng);
		});	
		
		// set position of marker to centroid of country
		var centroid = {lat: countryData.lat, lng: countryData.lon};
		marker.setLatLng(centroid); 
		
		// Add the location to the database, in case the user doesn't drag the marker
		setLocation(centroid);
		
		marker.on('dragend', function(event){
			var position = event.target.getLatLng();
			setLocation(event.target.getLatLng());
			marker.setLatLng(position,{draggable:'true'}).bindPopup(position).update();
		});
		
		// fit map to bounds of country
		bounds = countryLayer.getBounds();
		//locationpicker.fitBounds(bounds);				
	}
	
	var setLocation = function(latlng){
		$('#latitude').val(latlng.lat).trigger('change');
		$('#longitude').val(latlng.lng).trigger('change');		
	}
	
	// listen when page3 with leaflet map is opened
	$('#modalcontent').on('page3', function(){ 
		locationpicker.invalidateSize();
		locationpicker.fitBounds(bounds);
	});
	</script>
	
	<script type="text/javascript" class="source">
	
		$(document).ready(function() {
			
			$('#organizations').on("select2:select", function (e) { 
				$(e.target).validate(function(valid, elem) {
					if(!valid){
						return;
					}
				});
				value_id = $(e.target).attr("value-id");
				var value = e.params.data.text;

				if (value_id != "None") {
					update_free_text_value(value_id, value);
				} else {
					var category_id = $('.organizations').attr("category-id");
					var attribute_id = $('.organizations').attr("attribute-id");
					new_free_text_property(shelter_id, category_id, attribute_id, value, $(e.target));
				}
			});


			$('.select-attribute').change(function(evt) {
				$(evt.target).validate(function(valid, elem) {
					if(!valid){
						return;
					}
				});
				
				property_id = $(evt.target).attr("property-id");
				id_of_values = $(evt.target).val();
				if (typeof id_of_values === 'string') {
					tmp = []
					tmp.push(id_of_values)
					id_of_values = tmp
				}

				if (property_id==""){
					category_id = $(evt.target).attr("category-id");
					attribute_id = $(evt.target).attr("attribute-id");
					new_property(shelter_id,
									category_id, attribute_id, id_of_values,
									$(evt.target));
				} else {
					update_property(property_id, id_of_values);
				}
			});

			$('.free-text-attribute').change(function(evt) {
				$(evt.target).validate(function(valid, elem) {
					if(!valid){
						return;
					}
				});
				
				if( $(evt.target).hasClass('required-input') && !$(evt.target).val() ) {
					// add myerror class to parent div
					$(this).parent().parent().addClass('myerror');
				} else {
					// remove myerror class
					$(this).parent().parent().removeClass('myerror');
					// edit attribute
					editFreeTextOrDate(evt);
				}				
			});
			
			var editFreeTextOrDate = function (evt){
				value = $(evt.target).val();
				if ($(evt.target).context.type == "checkbox") {
					if (value == "on" || value == "1") {
						value = "0";
					} else {
						value = "1";
					}
				}
				value_id = $(evt.target).attr("value-id");

				if (value_id != "None") {
					update_free_text_value(value_id, value);
				} else {
					category_id = $(evt.target).attr("category-id");
					attribute_id = $(evt.target).attr("attribute-id");
					new_free_text_property(shelter_id, category_id, attribute_id, value, $(evt.target));
				}
			}
		});
		
		var resetForm = function(){
			//reset shelter title field
			$('#titleofproject').val('');
			$('#countrySelect').val('');
			$('#organizations').val('');
			$('#yearofconstructionfirstshelters').val('');
			$('#latitude').val('');
			$('#longitude').val('');
			$('#associatedDisasterSelect').val('');
			$('#shelterTypeSelect').val('');
			$('#unitCosts').val('');
			$('#inhabitants').val('');
			$('#surface').val('');
			
			if (dropzone != undefined) {
				Dropzone.forElement("div#uploader").destroy();
			}
			
			
		}
	
	</script>

    <script type="text/javascript">
            var modalPage = 0
			var modalName = ""
			var modalOpen = function(modalid){
				modalName = modalid
				$("#wrapper").addClass("modal-open")
				$("#" + modalid).css("visibility", "visible")
				setPage(1)
			}
			var modalClose = function(){
				$("#wrapper").removeClass("modal-open")
				$("#" + modalName).css("visibility", "hidden")
				modalName = ""
				modalResetPages()
				
				// reset form
				resetForm();
				
			}
			var modalPrev = function(){
				setPage(modalPage - 1)
			}
			var modalNext = function(formId){
				if(! $(formId).isValid({}, {}, true) ) {
					return;
				}
				setPage(modalPage + 1)
			}
			var setPage = function(page){
				modalPage = page
				modalResetPages()
				console.log(page)
				console.log($(".mymodal .page" + page))
				$(".mymodal .page" + page).css("display", "block")
				
				// trigger event that class changed
				$('#modalcontent').trigger('page'+page);
			}
			var modalResetPages = function(){
				$(".mymodal .page").each(function(el){
					$(this).css("display", "none")
				})
			}
			/**
            var optClick = function(nr){
                var elements = document.getElementsByClassName('option')
                var length = elements.length

                while(length--) {
                    elements[length].className = "option"
                }
                elements[nr].className = "option selected"
            }**/
    </script>
{% endblock %}

{% block wrapper_end %}
</div>
{% endblock %}
